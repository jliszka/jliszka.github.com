
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Programmer's Guide to the Central Limit Theorem, Part II: Difference of Means</title>
    <meta name="description" content="">
    <meta name="author" content="Jason Liszka">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/pygment.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">A Gentleman and a Scala</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>A Programmer's Guide to the Central Limit Theorem, Part II: Difference of Means </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>01 October 2013</span>
    </div>
    <div class="content">
      <style type='text/css'>
th {
  padding: 5px;
  border: 1px solid #ccc;
}
tbody tr:nth-child(odd) {
  background: #eee;
}
tbody tr:nth-child(even) {
  background: #fff;
}
</style>
<p>This is a continuation of <a href='/2013/08/26/a-programmers-guide-to-the-central-limit-theorem.html'>my previous post</a> on the Central Limit Theorem.</p>

<h3 id='the_ab_test_a_case_study'>The A/B Test: A case study</h3>

<p>You&#8217;re designing a new feature for your website and you can&#8217;t decide which <a href=''>shade of blue</a> to use. So you let your users decide by trying both — some users see this shade and some users get this one. Whichever group of users spends more time on the site will determine which color you end up going with.</p>

<p>You run your experiment for a week and collect the following data:</p>
<table><thead><tr><th>Group</th><th>Shade of blue</th><th># of users</th><th>Average time on site</th></tr></thead><tbody><tr><td style='text-align: left;'>A</td><td style='text-align: left;'>this one</td><td style='text-align: left;'>10,281</td><td style='text-align: left;'>91.4 seconds</td>
</tr><tr><td style='text-align: left;'>B</td><td style='text-align: left;'>this one</td><td style='text-align: left;'>10,154</td><td style='text-align: left;'>113.8 seconds</td>
</tr></tbody></table>
<p>Looks like group B did slightly better! But it&#8217;s a small difference, how can you be sure it&#8217;s significant? In other words, assuming that the shade of blue had no effect on the amount of time a user spends on the site, what is the probability that you would have observed a difference of 21.4 seconds just by chance? In other other words, given the distribution of the amount of time different users spend on the site, if you draw 2 samples of 10,000 or so from this distribution, what is the probability that you would see a difference of 21.4 (or more) in the averages of the samples?</p>

<p>Well, you would expect that that depends a lot on the distribution. Here it is:</p>

<pre><code>  0.0 72.98% ########################################################################
 10.0 16.93% ################
 20.0  3.97% ###
 30.0  1.72% #
 40.0  1.04% #
 50.0  0.76% 
 60.0  0.45% 
 70.0  0.52% 
 80.0  0.35% 
 90.0  0.29% 
100.0  0.22% 
110.0  0.19% 
120.0  0.13% 
130.0  0.05% 
140.0  0.08% 
150.0  0.09% 
160.0  0.09% 
170.0  0.05% 
180.0  0.06% 
190.0  0.02% 
200.0  0.01% 
...</code></pre>

<p>Hm, ok. Looks like the average time on the site is not the <em>typical</em> time on the site, and the average is being skewed by outliers. You might recognize this as a Pareto distribution, which has no well-defined mean and is not really suitable for this kind of analysis. So let&#8217;s pick a different metric. We could try the median time on the site, which is not sensitive to outliers like mean is. Or we could look at the percentage of users who spent more than some amount of time (say 10 seconds) on the site. Let&#8217;s go with that.</p>
<table><thead><tr><th>Group</th><th>Shade of blue</th><th># of users</th><th>% who spent more than 10 seconds on the site</th></tr></thead><tbody><tr><td style='text-align: left;'>A</td><td style='text-align: left;'>this one</td><td style='text-align: left;'>10,281</td><td style='text-align: left;'>15.5%</td>
</tr><tr><td style='text-align: left;'>B</td><td style='text-align: left;'>this one</td><td style='text-align: left;'>10,154</td><td style='text-align: left;'>18.7%</td>
</tr></tbody></table>
<p>Alright, that&#8217;s better. Now we have to ask whether that 3.2% difference can be explained by randomness or whether it has to be due to one color being better than the other. The question is equivalent to, if I flip a biased coin (that comes up heads 17.1% of the time) 10,281 times and then 10,154 times, what is the probability that the two experiments will yield results as far apart as 3.2%?</p>
    </div>

    

  


  <div style="float: right; margin-top: 5px">
  <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://jliszka.github.io/drafts/a-programmers-guide-to-the-central-limit-theorem-part-ii-difference-of-means.html" data-text="A Programmer's Guide to the Central Limit Theorem, Part II: Difference of Means" data-via="jliszka">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>




  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#probability-ref">probability <span>5</span></a></li>
    
  



    </ul>
    
    <div style="clear: both"></div>

    <hr>
    <div class="navigation">
    
    
      <div style="clear: both"></div>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'jliszka'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2013 Jason Liszka
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42567355-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

