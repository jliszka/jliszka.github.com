
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Gentleman and a Scala</title>
    
    <meta name="author" content="Jason Liszka">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1&amp;v=2" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/pygment.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <div class="row-fluid">
            <div class="span9 offset1">
              <a class="brand" href="/">A Gentleman and a Scala</a>
              <ul class="nav">
                
                
                


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  



              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="row-fluid">
  <div class="span9 offset1 post-content post-spacer"></div>
</div>
<div class="row-fluid">
  <div class="span9 offset1 post-content">
    <div class="page-header">
      <h1>A Gentleman and a Scala<br/><small>Understanding math through code</small></h2>
    </div>
    <p>My name is Jason Liszka, and I&#8217;m a software engineer at Foursquare in New York. This blog chronicles my attempt to understand math better through code. I&#8217;ve always been interested in abstract math, but computation has always been more intuitive to me. Realizing abstract structures in code makes them more concrete and makes it easier for me to wrap my puny human brain around them.</p>

<p>I&#8217;m a big fan of Scala and Haskell so you&#8217;ll see a lot of code in those languages.</p>

<p>You should <a href='http://twitter.com/jliszka'>follow me on twitter</a>. I promise I won&#8217;t spam your feed.</p>

<p>I also make no claims about being a gentleman, title of this blog notwithstanding.</p>

<h2 id='archive'>Archive</h2>
<ul class='posts'>
  
    <li><span>14 Nov 2013</span> &raquo; <a href='/2013/11/14/the-foursquare-theorem.html'>The Foursquare Theorem</a></li>
  
    <li><span>07 Nov 2013</span> &raquo; <a href='/2013/11/07/effective-peer-reviews.html'>Painless, effective peer reviews</a></li>
  
    <li><span>31 Oct 2013</span> &raquo; <a href='/2013/10/31/infinite-lazy-polynomials.html'>Infinite lazy polynomials</a></li>
  
    <li><span>24 Oct 2013</span> &raquo; <a href='/2013/10/24/exact-numeric-nth-derivatives.html'>Exact numeric nth derivatives</a></li>
  
    <li><span>19 Oct 2013</span> &raquo; <a href='/2013/10/19/impossible-functions.html'>Impossible functions</a></li>
  
    <li><span>10 Oct 2013</span> &raquo; <a href='/2013/10/10/understanding-a-b-test-analysis.html'>Understanding A/B test analysis</a></li>
  
    <li><span>01 Oct 2013</span> &raquo; <a href='/2013/10/01/how-traffic-actually-works.html'>How traffic actually works</a></li>
  
    <li><span>24 Sep 2013</span> &raquo; <a href='/2013/09/24/more-backwards-functions-unevaluating-polynomials.html'>Unevaluating polynomials</a></li>
  
    <li><span>18 Sep 2013</span> &raquo; <a href='/2013/09/18/insertion-sort-is-dual-to-bubble-sort.html'>Insertion sort is dual to bubble sort</a></li>
  
    <li><span>09 Sep 2013</span> &raquo; <a href='/2013/09/09/the-3-things-you-should-understand-about-quantum-computing.html'>The 3 Things You Should Understand about Quantum Computation</a></li>
  
    <li><span>03 Sep 2013</span> &raquo; <a href='/2013/09/03/fun-with-bayesian-priors.html'>Fun with Bayesian Priors</a></li>
  
    <li><span>26 Aug 2013</span> &raquo; <a href='/2013/08/26/a-programmers-guide-to-the-central-limit-theorem.html'>A Programmer's Guide to the Central Limit Theorem</a></li>
  
    <li><span>19 Aug 2013</span> &raquo; <a href='/2013/08/19/climbing-the-probability-distribution-ladder.html'>Climbing the probability distribution ladder</a></li>
  
    <li><span>12 Aug 2013</span> &raquo; <a href='/2013/08/12/a-frequentist-approach-to-probability.html'>A frequentist approach to probability</a></li>
  
</ul>
<h2 id='recent_posts'>Recent Posts</h2>
<div class='post-content-truncate'>

  
    <h2 class='title'>The Foursquare Theorem</h2>
    <p>This has nothing to do with the <a href='http://en.wikipedia.org/wiki/Four_square'>playground game</a>, the <a href='http://www.foursquare.org/'>church</a>, or the <a href='https://foursquare.com'>mobile/social/local city guide</a> that helps you make the most of where you are. (Disclosure: I work at Foursquare.)</p>

<p>This is about <a href='http://en.wikipedia.org/wiki/Lagrange%27s_four-square_theorem'>Lagrange&#8217;s four-square theorem</a>, which states that every natural number can be expressed as the sum of four squares. For example, <script type='math/tex; mode=display'>
%<![CDATA[
\newcommand\m[1]{\text{ }(\text{mod }#1)}
123456789 = 2142^2 + 8673^2 + 6264^2 + 2100^2
%]]>
</script></p>

<p>The proof given on the Wikipedia page is only an existence proof, but I was able to find a <a href='http://www.alpertron.com.ar/4SQUARES.HTM'>mostly constructive proof</a> elsewhere online. I want to present an outline of the proof along with some code that carries out the construction. Here&#8217;s a preview:</p>

<pre><code>*Main&gt; foursquare 123456789
(-2142,8673,6264,-2100)</code></pre>

    <a href='/2013/11/14/the-foursquare-theorem.html'>Read more</a>
  

  
    <h2 class='title'>Painless, effective peer reviews</h2>
    <p>Peer reviews are the most effective kind of feedback — only your peers really know what it&#8217;s like to work with you, and they have the most insightful, nuanced and helpful suggestions for improvement. Almost every tech company I can think of does them as part of their annual review process. The problem is that everyone hates writing them, because decent feedback takes a really long time to write, sometimes on the order of 4 or 5 hours for a single peer review.</p>

<p>I&#8217;d like to solve this problem. Most people think that there&#8217;s a natural, unavoidable relationship between quality and time spent. But that overlooks an important point — the thing that makes writing peer reviews difficult is: writing itself.</p>

<h3 id='the_interview_method'>The interview method</h3>

<p>Here are 5 easy steps to collecting insightful, critical, honest peer review feedback, in about an hour:</p>

    <a href='/2013/11/07/effective-peer-reviews.html'>Read more</a>
  

  
    <h2 class='title'>Infinite lazy polynomials</h2>
    <blockquote class='quote'>
  <p>"Never underestimate the insights encoded into the coefficients of a polynomial!"</p>
  —Steven Rudich
</blockquote>
<p>In this post I&#8217;m going to write a toy library for manipulating infinite lazy polynomials. I promise this will be fun.</p>

<h3 id='representation'>Representation</h3>

<p>You might try representing a polynomial of infinite degree as an infinite stream of coefficients. But I think it would be easier to think about it in terms of a function <script type='math/tex'>c:\mathbb{N} \rightarrow \mathbb{R}</script> that gives you the coefficient for a given power of <script type='math/tex'>x</script> in the polynomial. So the polynomial represented by some function <script type='math/tex'>c</script> would be</p>
<script type='math/tex; mode=display'>
%<![CDATA[
p_c(x) = c(0) + c(1)x + c(2)x^2 + c(3)x^3 + \ldots
%]]>
</script>
<p>Here&#8217;s the setup:</p>
<div class='highlight'><pre><code class='scala'><span class='k'>class</span><span class='kd'> </span><span class='nc'>Poly</span><span class='p'>(</span><span class='n'>coeffs</span><span class='k'>:</span> <span class='kt'>Int</span> <span class='kt'>=&gt;</span> <span class='kt'>Double</span><span class='p'>)</span> <span class='p'>{</span>

  <span class='c1'>// Memoizing coefficient accessor. Returns the coefficient for x^n.</span>
  <span class='k'>def</span> <span class='nf'>apply</span><span class='p'>(</span><span class='n'>n</span><span class='k'>:</span> <span class='kt'>Int</span><span class='p'>)</span><span class='k'>:</span> <span class='kt'>Double</span> <span class='p'>= </span><span class='n'>memo</span><span class='p'>.</span><span class='n'>getOrElseUpdate</span><span class='p'>(</span><span class='n'>n</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='n'>coeffs</span><span class='p'>(</span><span class='n'>n</span><span class='p'>))</span>

  <span class='c1'>// The memo table</span>
  <span class='k'>private</span> <span class='k'>val</span> <span class='n'>memo</span> <span class='k'>=</span> <span class='n'>scala</span><span class='p'>.</span><span class='n'>collection</span><span class='p'>.</span><span class='n'>mutable</span><span class='p'>.</span><span class='nc'>HashMap</span><span class='p'>[</span><span class='kt'>Int</span>, <span class='kt'>Double</span><span class='p'>]()</span>

  <span class='k'>override</span> <span class='k'>def</span> <span class='nf'>toString</span> <span class='k'>=</span> <span class='p'>{</span>
    <span class='s'>&quot;{ %s, ... }&quot;</span><span class='p'>.</span><span class='n'>format</span><span class='p'>((</span><span class='mi'>0</span> <span class='n'>to</span> <span class='mi'>10</span><span class='p'>).</span><span class='n'>map</span><span class='p'>(</span><span class='n'>i</span> <span class='k'>=&gt;</span> <span class='n'>df</span><span class='p'>.</span><span class='n'>format</span><span class='p'>(</span><span class='k'>this</span><span class='p'>(</span><span class='n'>i</span><span class='p'>))).</span><span class='n'>mkString</span><span class='p'>(</span><span class='s'>&quot;, &quot;</span><span class='p'>))</span>
  <span class='p'>}</span>
  <span class='k'>private</span> <span class='k'>val</span> <span class='n'>df</span> <span class='k'>=</span> <span class='k'>new</span> <span class='n'>java</span><span class='p'>.</span><span class='n'>text</span><span class='p'>.</span><span class='nc'>DecimalFormat</span><span class='p'>(</span><span class='s'>&quot;#.#######&quot;</span><span class='p'>)</span>
<span class='p'>}</span>
</code></pre></div>
<p>The <code>Poly</code> class just wraps a function of type <code>Int =&gt; Double</code>, memoizes it, and provides a <code>toString</code> representation including the first so many coefficients.</p>

<p>Now we can create instances like this:</p>

<pre><code>scala&gt; val one = new Poly(n =&gt; if (n == 0) 1 else 0)
one: Poly = { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ... }

scala&gt; val x = new Poly(n =&gt; if (n == 1) 1 else 0)
x: Poly = { 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, ... }</code></pre>

<p>You can access arbitrary coefficients by calling the <code>apply</code> method.</p>

<pre><code>scala&gt; x(0)
res0: Double = 0.0

scala&gt; x(1)
res1: Double = 1.0

scala&gt; x(12)
res2: Double = 0.0</code></pre>

<p>Just keep in mind that <code>p(n)</code> is the coefficient of <script type='math/tex'>x^n</script> in <code>p</code>, not <script type='math/tex'>p(n)</script> (i.e., <script type='math/tex'>p</script> evaluated at <script type='math/tex'>n</script>) as you might expect to see. I can get away with this because I&#8217;m probably never going to evaluate these polynomials, I&#8217;m just going to treat them formally, as mathematical objects in their own right. (To get my terminology straight, as some commenters have pointed out, these objects are called <a href='http://en.wikipedia.org/wiki/Formal_power_series'>formal power series</a>.)</p>

    <a href='/2013/10/31/infinite-lazy-polynomials.html'>Read more</a>
  

  
    <h2 class='title'>Exact numeric nth derivatives</h2>
    <p>Automatic differentiation is a well-studied technique for computing exact numeric derivatives. Dan Piponi has a <a href='http://blog.sigfpe.com/2005/07/automatic-differentiation.html'>great introduction on the subject</a>, but to give you an overview, the idea is that you introduce an algebraic symbol <script type='math/tex'>\newcommand\e\epsilon\e</script> such that <script type='math/tex'>\e \ne 0</script> but <script type='math/tex'>\e^2 = 0</script>. Formulas involving <script type='math/tex'>\e</script> are called <a href='http://en.wikipedia.org/wiki/Dual_number'>dual numbers</a> (e.g., <script type='math/tex'>1 + \e</script>, <script type='math/tex'>3 - 5\e</script>) in much the same way as complex numbers are formulas involving the algebraic symbol <script type='math/tex'>i</script>, which has the property <script type='math/tex'>i^2 = -1</script>.</p>

<p>Then you teach the computer how to add, subtract, multiply and divide with dual numbers. So for example, <script type='math/tex'>(1 + \e)(3 - 5\e) = 3 + 3\e - 5\e - 5\e^2 = 3 - 2\e</script> (since <script type='math/tex'>\e^2 = 0</script>). The computer keeps everything in &#8220;normal form,&#8221; i.e., <script type='math/tex'>a + b\e</script>, as you go along.</p>

<p>In order to find the derivative of some function <script type='math/tex'>f</script> at a point <script type='math/tex'>x</script>, all you have to do is compute <script type='math/tex'>f(x + \e)</script>. The answer you get (in normal form) is</p>
<script type='math/tex; mode=display'>
%<![CDATA[
f(x + \e) = f(x) + f'(x)\e
%]]>
</script>
<p>So for example, let <script type='math/tex'>f(x) = x^2</script> and let&#8217;s find <script type='math/tex'>f'(3)</script>. To do this, we compute <script type='math/tex'>f(3 + \e)</script>:</p>
<script type='math/tex; mode=display'>
%<![CDATA[
\begin{align}
f(3 + \e) &= (3 + \e)^2 \\
 &= 9 + 6\e + \e^2 \\
 &= 9 + 6\e
\end{align}
%]]>
</script>
<p>We expected <script type='math/tex'>f(3 + \e) = f(3) + f'(3)\e</script>. Equating these two results, we can conclude that <script type='math/tex'>f(3) = 9</script> and <script type='math/tex'>f'(3) = 6</script>. Which is true!</p>

<p>This works not just for simple polynomials, but for any compound or nested formula of any kind. Somehow dual numbers keep track of the derivative during the evaluation of the formula, respecting the chain rule, the product rule and all.</p>

<p>The reason this works becomes clearer when you consider the <a href='http://en.wikipedia.org/wiki/Taylor_series'>Taylor series</a> expansion of a function:</p>
<script type='math/tex; mode=display'>
%<![CDATA[
f(x + p) = f(x) + f'(x)p + \frac{f''(x)p^2}{2!} + \frac{f^{(3)}(x)p^3}{3!} + \ldots
%]]>
</script>
<p>When you evaluate <script type='math/tex'>f(x + \e)</script>, all the higher-order terms drop out (because <script type='math/tex'>\e^2 = 0</script>) and all you&#8217;re left with is <script type='math/tex'>f(x) + f'(x)\e</script>.</p>

    <a href='/2013/10/24/exact-numeric-nth-derivatives.html'>Read more</a>
  

  
    <h2 class='title'>Impossible functions</h2>
    <style type='text/css'>
th {
  padding: 5px;
  border: 1px solid #ccc;
}
tbody tr:nth-child(odd) {
  background: #eee;
}
tbody tr:nth-child(even) {
  background: #fff;
}
</style>
<p>I claim to have a function <code>H</code> that maps any integer-valued function you give it to a different integer. That is, an injection from <code>Int =&gt; Int</code> to <code>Int</code> that returns a different <code>Int</code> for every function you give it.</p>

<p>This is clearly impossible, since there are way more functions from integers to integers than there are integers. But I demand proof in the form of witnesses <code>f: Int =&gt; Int</code>, <code>g: Int =&gt; Int</code> and <code>n: Int</code> such that <code>H(f) == H(g)</code> and <code>f(n) != g(n)</code>.</p>

<p>Your job is to write a function <code>solve</code> that takes a single argument <code>H: (Int =&gt; Int) =&gt; Int</code> and returns <code>f</code>, <code>g</code> and <code>n</code> as described above.</p>

<p>One approach is to put together a mathematical proof that such an injection is impossible and try to extract a program from that proof à la the <a href='http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence'>Curry-Howard isomorphism</a>.</p>

    <a href='/2013/10/19/impossible-functions.html'>Read more</a>
  

  
    <h2 class='title'>Understanding A/B test analysis</h2>
    <style type='text/css'>
th {
  padding: 5px;
  border: 1px solid #ccc;
}
tbody tr:nth-child(odd) {
  background: #eee;
}
tbody tr:nth-child(even) {
  background: #fff;
}
.blue1 {
  color: #16f;
}
.blue2 {
  color: #51f;
}
</style>
<p>This is a continuation of my <a href='/2013/08/26/a-programmers-guide-to-the-central-limit-theorem.html'>previous post on the Central Limit Theorem</a>.</p>

<p>Say you&#8217;re designing a new feature for your website and you can&#8217;t decide which shade of blue to use. So you let your users decide by trying both — some users see <span class='blue1'>this shade</span> and some users get <span class='blue2'>this one</span>. Whichever group of users spends more time on the site will determine which color you end up going with.</p>

<p>You run your experiment for a little while and collect the following data:</p>
<table><thead><tr><th>Group</th><th>Shade of blue</th><th># of users</th><th>Average time on site</th></tr></thead><tbody><tr><td style='text-align: left;'>A</td><td style='text-align: left;'><span class='blue1'>this one</span></td><td style='text-align: left;'>1,028</td><td style='text-align: left;'>91.4 seconds</td>
</tr><tr><td style='text-align: left;'>B</td><td style='text-align: left;'><span class='blue2'>this one</span></td><td style='text-align: left;'>1,015</td><td style='text-align: left;'>103.8 seconds</td>
</tr></tbody></table>
<p>Looks like group B did better! But it&#8217;s a small difference, how can you be sure it&#8217;s significant? In other words, assuming that the shade of blue had no effect on the amount of time a user spends on the site, what is the probability that you would have observed a difference of 11.4 seconds? In <em>other</em> other words, given the distribution of the amount of time different users spend on the site, if you draw 2 samples of 1,000 or so from this distribution, what is the probability that you would see a difference of 21.4 (or more) in the averages of the samples?</p>

<p>Well, you would expect that that depends a lot on the distribution. Here is the distribution you observed:</p>

    <a href='/2013/10/10/understanding-a-b-test-analysis.html'>Read more</a>
  

  
    <h2 class='title'>How traffic actually works</h2>
    <p>Every so often <a href='http://www.smartmotorist.com/traffic-and-safety-guideline/traffic-jams.html'>this article</a> makes the rounds and it annoys me. That isn&#8217;t how traffic works and the proposed solutions won&#8217;t fix anything. Maybe you can eliminate the annoying stop-and-go, but no one gets home any faster. In fact you can prove that you and everyone behind you get home strictly later than if you had just gone along with the stop-and-go traffic.</p>

<h3 id='the_facts'>The facts</h3>

<p>Here&#8217;s how traffic works. First, we know from <a href='http://www.fhwa.dot.gov/publications/research/operations/tft/chap2.pdf'>empirical studies</a> that drivers tend to maintain a minimum following distance, measured in seconds. It varies per driver, but typically it&#8217;s somewhere between 1.5 and 2 seconds. That works out to a maximum theoretical flow rate of between 1,800 and 2,400 vehicles per lane per hour passing by a given point on the highway. Studies of actual highway traffic have measured flow rates as high as 2,000 vehicles per lane per hour, which works out to a following distance of 1.8 seconds. (I&#8217;m just going to call it 2 seconds for the sake of round numbers.)</p>

<p>The important fact: <strong>there is a limit to the number of cars that can pass by a given point on the highway in a given amount of time, and that limit is one car every 2 seconds, per lane</strong>. So imagine you are in heavy traffic during rush hour. There are a certain number of cars in line in front of you. Let&#8217;s pick a point on the road to call the front of the line — say, the point at which you plan to exit the highway. The line gets shorter by one car every 2 seconds. If there are 1,000 cars in front of you, it&#8217;s going to take a minimum of 2,000 seconds for you to get to the front of the line. It doesn&#8217;t matter whether people are kind and let cars merge in front of them, zipper-style. It doesn&#8217;t matter how much stop-and-go there is. The simple fact is that it takes 2 seconds per car for you to get to the front of the line, and there are some cars in front of you that have to get there before you do.</p>

    <a href='/2013/10/01/how-traffic-actually-works.html'>Read more</a>
  

  
    <h2 class='title'>Unevaluating polynomials</h2>
    <p>I have a function that evaluates polynomials with integer coefficients. To evaluate <script type='math/tex; mode=display'>
%<![CDATA[
f(x) = 6 + 5x + 2x^3
%]]>
</script> at <script type='math/tex'>f(8)</script>, for example, you do this:</p>

<pre><code>scala&gt; evalPoly(8, List(6, 5, 0, 2))
res0: (Int, Int) = (8, 1070)</code></pre>

<p>For some reason it echoes the input back out to you. Here&#8217;s the code you might write:</p>
<div class='highlight'><pre><code class='scala'><span class='k'>def</span> <span class='nf'>evalPoly</span><span class='p'>(</span><span class='n'>x</span><span class='k'>:</span> <span class='kt'>Int</span><span class='p'>,</span> <span class='n'>coeffs</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>Int</span><span class='p'>])</span><span class='k'>:</span> <span class='p'>(</span><span class='kt'>Int</span><span class='p'>,</span> <span class='kt'>Int</span><span class='p'>)</span> <span class='k'>=</span> <span class='p'>{</span>
  <span class='k'>def</span> <span class='nf'>eval</span><span class='p'>(</span><span class='n'>cs</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>Int</span><span class='p'>])</span><span class='k'>:</span> <span class='kt'>Int</span> <span class='p'>= {</span>
    <span class='n'>cs</span> <span class='k'>match</span> <span class='p'>{</span>
      <span class='k'>case</span> <span class='nc'>Nil</span> <span class='k'>=&gt;</span> <span class='mi'>0</span>
      <span class='k'>case</span> <span class='n'>h</span> <span class='o'>::</span> <span class='n'>t</span> <span class='k'>=&gt;</span> <span class='n'>x</span> <span class='o'>*</span> <span class='n'>eval</span><span class='p'>(</span><span class='n'>t</span><span class='p'>)</span> <span class='o'>+</span> <span class='n'>h</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
  <span class='p'>(</span><span class='n'>x</span><span class='p'>,</span> <span class='n'>eval</span><span class='p'>(</span><span class='n'>coeffs</span><span class='p'>))</span>
<span class='p'>}</span>
</code></pre></div>
<p>This should not be surprising.</p>

<p>But I also have a function that un-evaluates polynomials. To un-evaluate <script type='math/tex'>f(8) = 1070</script>, you do this:</p>

<pre><code>scala&gt; unevalPoly(8, 1070)
res1: (Int, List[Int]) = (8, List(6, 5, 0, 2))</code></pre>

<p>and it echoes your input and gives you back the coefficients of the polynomial.</p>

    <a href='/2013/09/24/more-backwards-functions-unevaluating-polynomials.html'>Read more</a>
  

  
    <h2 class='title'>Insertion sort is dual to bubble sort</h2>
    <p>I noticed recently that <a href='http://en.wikipedia.org/wiki/insertion_sort'>insertion sort</a> is <a href='http://en.wikipedia.org/wiki/Bubble_sort'>bubble sort</a> backwards. Or inside out. Or something.</p>

<p>Both algorithms can be expressed as a main function that calls a recursive helper. Let&#8217;s take a look at the main functions first.</p>

<h3 id='the_main_functions'>The main functions</h3>

<p>Here&#8217;s the code:</p>
<div class='highlight'><pre><code class='scala'><span class='k'>def</span> <span class='nf'>insertionSort</span><span class='p'>[</span><span class='kt'>A</span> <span class='k'>&lt;:</span> <span class='kt'>Ordered</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>]](</span><span class='n'>xs</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>])</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>]</span> <span class='k'>=</span> <span class='p'>{</span>
  <span class='n'>xs</span> <span class='k'>match</span> <span class='p'>{</span>
    <span class='k'>case</span> <span class='nc'>Nil</span> <span class='k'>=&gt;</span> <span class='nc'>Nil</span>
    <span class='k'>case</span> <span class='n'>h</span> <span class='o'>::</span> <span class='n'>t</span> <span class='k'>=&gt;</span> <span class='p'>{</span>
      <span class='k'>val</span> <span class='n'>s</span> <span class='k'>=</span> <span class='n'>insertionSort</span><span class='p'>(</span><span class='n'>t</span><span class='p'>)</span>
      <span class='n'>insert</span><span class='p'>(</span><span class='n'>h</span><span class='p'>,</span> <span class='n'>s</span><span class='p'>)</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
<span class='p'>}</span>
</code></pre></div>
<p><code>insertionSort</code> sorts a list by inserting the head of the list into the recursively sorted tail, in such a way that it remains sorted.</p>
<div class='highlight'><pre><code class='scala'><span class='k'>def</span> <span class='nf'>bubbleSort</span><span class='p'>[</span><span class='kt'>A</span> <span class='k'>&lt;:</span> <span class='kt'>Ordered</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>]](</span><span class='n'>xs</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>])</span><span class='k'>:</span> <span class='kt'>List</span><span class='p'>[</span><span class='kt'>A</span><span class='p'>]</span> <span class='k'>=</span> <span class='p'>{</span>
  <span class='n'>xs</span> <span class='k'>match</span> <span class='p'>{</span>
    <span class='k'>case</span> <span class='nc'>Nil</span> <span class='k'>=&gt;</span> <span class='nc'>Nil</span>
    <span class='k'>case</span> <span class='n'>xs</span> <span class='k'>=&gt;</span> <span class='p'>{</span>
      <span class='k'>val</span> <span class='p'>(</span><span class='n'>h</span><span class='p'>,</span> <span class='n'>t</span><span class='p'>)</span> <span class='k'>=</span> <span class='n'>bubble</span><span class='p'>(</span><span class='n'>xs</span><span class='p'>)</span>
      <span class='k'>val</span> <span class='n'>s</span> <span class='k'>=</span> <span class='n'>bubbleSort</span><span class='p'>(</span><span class='n'>t</span><span class='p'>)</span>
      <span class='n'>h</span> <span class='o'>::</span> <span class='n'>s</span>
    <span class='p'>}</span>
  <span class='p'>}</span>  
<span class='p'>}</span>
</code></pre></div>
<p><code>bubbleSort</code> sorts a list by bubbling the smallest element to the front of the list and recursively sorting the tail.</p>

<p>It&#8217;s not obvious from the code that these functions are backwards versions of each other, but look at their data flow diagrams:</p>

    <a href='/2013/09/18/insertion-sort-is-dual-to-bubble-sort.html'>Read more</a>
  

  
    <h2 class='title'>The 3 Things You Should Understand about Quantum Computation</h2>
    <p>I&#8217;m working on a post about probablistic graphical models, but it&#8217;s not done yet, so in the meantime here&#8217;s a post about quantum probability.</p>

<h3 id='loaded_dice'>Loaded dice</h3>

<p>Let&#8217;s say you have a loaded die with the following probability distribution:</p>
<table><thead><tr><th /><th /></tr></thead><tbody><tr><td style='text-align: center;'><strong>1</strong></td><td style='text-align: center;'>10%</td>
</tr><tr><td style='text-align: center;'><strong>2</strong></td><td style='text-align: center;'>20%</td>
</tr><tr><td style='text-align: center;'><strong>3</strong></td><td style='text-align: center;'>30%</td>
</tr><tr><td style='text-align: center;'><strong>4</strong></td><td style='text-align: center;'>10%</td>
</tr><tr><td style='text-align: center;'><strong>5</strong></td><td style='text-align: center;'>20%</td>
</tr><tr><td style='text-align: center;'><strong>6</strong></td><td style='text-align: center;'>10%</td>
</tr></tbody></table>
<p>How many pieces of information are encoded in a loaded die like this? It&#8217;s weird to think of a probability distribution encoding information, but think of it this way: if you sent me this die in the mail, I could roll it a bunch of times to discover the probability for each face of the die. If you control how the die is weighted, you could send me a message that way.</p>

<p>Anyway, the answer is that there are 5 pieces of information encoded in this distribution. (If you&#8217;re not sure why it isn&#8217;t 6, notice that once you specify 5 of the entries in the table, the 6th one is completely determined, since they all have to add up to 100%. So you can really only send me 5 numbers of your choosing this way.)</p>

    <a href='/2013/09/09/the-3-things-you-should-understand-about-quantum-computing.html'>Read more</a>
  

</div>
  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2013 Jason Liszka
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42567355-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

